name: Metrics

on:
  schedule:
    - cron: "0 0 * * *"
  workflow_dispatch:

permissions:
  contents: write

jobs:
  github-metrics:
    runs-on: ubuntu-latest
    steps:
      - uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}

          filename: github-metrics.svg
          config_output: svg
          config_animations: yes
          config_timezone: Asia/Kolkata

          template: classic
          base: header, activity, repositories
          config_order: base.header, isocalendar, languages

          # Isometric contribution calendar
          plugin_isocalendar: yes
          plugin_isocalendar_duration: full-year

          # Language breakdown
          plugin_languages: yes
          plugin_languages_limit: 8
          plugin_languages_threshold: 2%
          plugin_languages_details: percentage
          plugin_languages_sections: most-used
          plugin_languages_colors: "0:#00e5b0, 1:#00c49a, 2:#009d7b, 3:#00785e, 4:#005542, 5:#58a6ff, 6:#9d8fff, 7:#d2a8ff"
          plugin_languages_other: yes
          plugin_languages_ignored: html, css

          # Dark theme â€” IdleSync brand colors
          extras_css: |
            svg foreignObject > div { background-color: #08080d !important; }
            * { color: #e0e0e0 !important; }
            h1, h2, h3 { color: #00e5b0 !important; }
            .field svg { fill: #e0e0e0 !important; }
            :root {
              --color-calendar-graph-day-bg: #161b22;
              --color-calendar-graph-day-L1-bg: #004d3a;
              --color-calendar-graph-day-L2-bg: #007a5e;
              --color-calendar-graph-day-L3-bg: #00b888;
              --color-calendar-graph-day-L4-bg: #00e5b0;
            }
